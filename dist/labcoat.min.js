// Generated by CoffeeScript 1.12.4
/*

    ............... LABCOAT ................

     A client-side frontend for Mastodon, a
    free & open-source social network server
               - - by Kibigo! - -

        Licensed under the MIT License.
           Source code available at:
      https://github.com/marrus-sh/labcoat

                Version 0.2.0
 */
(function(){var Columns,IndexRoute,Locales,Modules,ReactPureRenderMixin,Route,Router,Shared,UI,slice=[].slice,hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Object.defineProperty(window,"彁",{value:React.createElement}),void 0!==ReactPureRenderMixin&&null!==ReactPureRenderMixin||(ReactPureRenderMixin=React.addons.PureRenderMixin),Columns={},Columns.Column=function(props){return 彁("div",null!=props.id?{id:props.id,className:"labcoat-column"}:{className:"labcoat-column"},props.children)},Columns.GoLink=function(props){return 彁(ReactRouter.Link,{to:props.to,"aria-hidden":!0},彁(Shared.Icon,{name:props.icon}),props.children)},Columns.GoLink.propTypes={to:React.PropTypes.string.isRequired,icon:React.PropTypes.string.isRequired},Columns.Heading=function(props){return 彁("h2",{className:"labcoat-heading"},props.icon?彁(Shared.Icon,{name:props.icon}):null,props.children)},Columns.Heading.propTypes={icon:React.PropTypes.string},Columns.Status=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{type:React.PropTypes.object.isRequired,id:React.PropTypes.number.isRequired,href:React.PropTypes.string,author:React.PropTypes.object.isRequired,inReplyTo:React.PropTypes.number,content:React.PropTypes.string,datetime:React.PropTypes.object,isReblogged:React.PropTypes.bool,isFavourited:React.PropTypes.bool,isNSFW:React.PropTypes.bool,message:React.PropTypes.string,visibility:React.PropTypes.object,mediaAttachments:React.PropTypes.array,mentions:React.PropTypes.array,rebloggedBy:React.PropTypes.object,favouritedBy:React.PropTypes.object,follower:React.PropTypes.object},contextTypes:{router:React.PropTypes.object.isRequired},getListOfMentions:function(){switch(this.props.mentions.length){case 0:return[];case 1:return[彁(ReactRouter.Link,{to:"/user/"+this.props.mentions[0].id},彁("code",{className:"labcoat-username"},this.props.mentions[0].username))];case 2:return[彁(ReactRouter.Link,{to:"/user/"+this.props.mentions[0].id},彁("code",{className:"labcoat-username"},this.props.mentions[0].username)),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "}),彁(ReactIntl.FormattedMessage,{id:"status.and",message:"and"}),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "}),彁(ReactRouter.Link,{to:"/user/"+this.props.mentions[1].id},彁("code",{className:"labcoat-username"},this.props.mentions[1].username))];case 3:return[彁(ReactRouter.Link,{to:"/user/"+this.props.mentions[0].id},彁("code",{className:"labcoat-username"},this.props.mentions[0].username)),彁(ReactIntl.FormattedMessage,{id:"character.comma",message:", "}),彁(ReactRouter.Link,{to:"/user/"+this.props.mentions[1].id},彁("code",{className:"labcoat-username"},this.props.mentions[1].username)),彁(ReactIntl.FormattedMessage,{id:"character.comma",message:", "}),彁(ReactIntl.FormattedMessage,{id:"status.and",message:"and"}),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "}),彁(ReactRouter.Link,{to:"/user/"+this.props.mentions[2].id},彁("code",{className:"labcoat-username"},this.props.mentions[2].username))];default:return[彁(ReactRouter.Link,{to:"/user/"+this.props.mentions[0].id},彁("code",{className:"labcoat-username"},this.props.mentions[0].username)),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "}),彁(ReactIntl.FormattedMessage,{id:"status.etal",message:"et al."})]}},render:function(){return this.props.follower?彁("article",{className:"labcoat-status"},彁(Shared.IDCard,{account:this.props.follower}),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "}),彁(ReactIntl.FormattedMessage,{id:"status.followedyou",message:"followed you!"})):彁("article",{className:"labcoat-status"+(this.props.isFavourited?" labcoat-status--favourited":"")},null!=this.props.rebloggedBy||null!=this.props.favouritedBy||null!=this.props.inReplyTo?彁.apply(null,["aside",null].concat(slice.call(function(){var ref1,ref2,ref3;switch(!1){case!(null!=this.props.inReplyTo&&null!=this.props.rebloggedBy):return[彁(ReactRouter.Link,{to:"/user/"+this.props.rebloggedBy.id},彁("code",{className:"labcoat-username"},this.props.rebloggedBy.username)),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "})].concat(slice.call((null!=(ref1=this.props.mentions)?ref1.length:void 0)?[彁(ReactIntl.FormattedMessage,{id:"status.rebloggedthisreplyto",message:"boosted this reply to"}),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "})].concat(slice.call(this.getListOfMentions())):[彁(ReactIntl.FormattedMessage,{id:"status.rebloggedthisreply",message:"boosted this reply"})]));case!(null!=this.props.inReplyTo&&null!=this.props.favouritedBy):return[彁(ReactRouter.Link,{to:"/user/"+this.props.favouritedBy.id},彁("code",{className:"labcoat-username"},this.props.favouritedBy.username)),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "})].concat(slice.call((null!=(ref2=this.props.mentions)?ref2.length:void 0)?[彁(ReactIntl.FormattedMessage,{id:"status.favouritedthisreplyto",message:"highlighted this reply to"}),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "})].concat(slice.call(this.getListOfMentions())):[彁(ReactIntl.FormattedMessage,{id:"status.favouritedthisreply",message:"highlighted this reply"})]));case null==this.props.rebloggedBy:return[彁(ReactRouter.Link,{to:"/user/"+this.props.rebloggedBy.id},彁("code",{className:"labcoat-username"},this.props.rebloggedBy.username)),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "}),彁(ReactIntl.FormattedMessage,{id:"status.rebloggedthisstatus",message:"boosted this post"})];case null==this.props.favouritedBy:return[彁(ReactRouter.Link,{to:"/user/"+this.props.favouritedBy.id},彁("code",{className:"labcoat-username"},this.props.favouritedBy.username)),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "}),彁(ReactIntl.FormattedMessage,{id:"status.favouritedthisstatus",message:"highlighted this post"})];case null==this.props.inReplyTo:return(null!=(ref3=this.props.mentions)?ref3.length:void 0)?[彁(ReactIntl.FormattedMessage,{id:"status.inreplyto",message:"In reply to"}),彁(ReactIntl.FormattedMessage,{id:"character.space",message:" "})].concat(slice.call(this.getListOfMentions())):[彁(ReactIntl.FormattedMessage,{id:"status.inreplytoself",message:"In reply to themselves"})]}}.call(this)))):null,彁("header",null,彁(Shared.IDCard,{account:this.props.author}),彁(ReactIntl.FormattedRelative,{value:Date.parse(this.props.datetime)},function(_this){return function(formattedDate){return 彁("time",{dateTime:_this.props.datetime,title:_this.props.datetime},formattedDate)}}(this))),彁("div",{className:"labcoat-statusContent",dangerouslySetInnerHTML:{__html:this.props.content}}),this.props.type===Laboratory.Post.Type.STATUS||this.props.author.relationship!==Laboratory.Profile.Relationship.SELF?彁("footer",null,彁(Shared.Action,{className:"labcoat-reply",icon:"icon.reply",label:彁(ReactIntl.FormattedMessage,{id:"status.reply",defaultMessage:"Reply"}),action:function(_this){return function(){return _this.context.router.push("/compose?text="+(_this.props.author.relationship!==Laboratory.Profile.Relationship.SELF?"@"+_this.props.author.localAccount:"")+"&inReplyTo="+_this.props.id)}}(this)}),this.props.isFavourited?彁(Shared.Action,{active:!0,className:"labcoat-unfavourite",icon:"icon.unfavourite",label:彁(ReactIntl.FormattedMessage,{id:"status.unfavourite",defaultMessage:"Unhighlight"}),action:function(_this){return function(){return Laboratory.dispatch("LaboratoryPostSetFavourite",{id:_this.props.id,value:!1})}}(this)}):彁(Shared.Action,{active:!1,className:"labcoat-favourite",icon:"icon.favourite",label:彁(ReactIntl.FormattedMessage,{id:"status.favourite",defaultMessage:"Highlight"}),action:function(_this){return function(){return Laboratory.dispatch("LaboratoryPostSetFavourite",{id:_this.props.id,value:!0})}}(this)}),this.props.isReblogged?彁(Shared.Action,{active:!0,className:"labcoat-unreblog",icon:"icon.unreblog",label:彁(ReactIntl.FormattedMessage,{id:"status.unreblog",defaultMessage:"Unboost"}),action:function(_this){return function(){return Laboratory.dispatch("LaboratoryPostSetReblog",{id:_this.props.id,value:!1})}}(this)}):this.props.visibility&Laboratory.Post.Visibility.REBLOGGABLE?彁(Shared.Action,{active:!1,className:"labcoat-reblog",icon:"icon.reblog",label:彁(ReactIntl.FormattedMessage,{id:"status.reblog",defaultMessage:"Boost"}),action:function(_this){return function(){return Laboratory.dispatch("LaboratoryPostSetReblog",{id:_this.props.id,value:!0})}}(this)}):彁(Shared.Action,{active:!1,className:"labcoat-noreblog",icon:"icon.noreblog",disabled:!0,label:彁(ReactIntl.FormattedMessage,{id:"status.noreblog",defaultMessage:"Private"})})):null)}}),Columns.Empty=function(){return 彁(Columns.Column,{id:"labcoat-empty"},彁(Columns.Heading))},Columns.Go=function(props){var key,value;return 彁(Columns.Column,{id:"labcoat-go"},彁(Columns.Heading,{icon:"icon.go"},彁(ReactIntl.FormattedMessage,{id:"go.heading",defaultMessage:"let's GO!"})),彁("nav",{className:"labcoat-columnnav"},彁(Columns.GoLink,{to:"/user/"+props.myID,icon:"icon.profile"},彁(ReactIntl.FormattedMessage,{id:"go.profile",defaultMessage:"Profile"})),彁(Columns.GoLink,{to:"/community",icon:"icon.community"},彁(ReactIntl.FormattedMessage,{id:"go.community",defaultMessage:"Community"})),彁(Columns.GoLink,{to:"/global",icon:"icon.global"},彁(ReactIntl.FormattedMessage,{id:"go.global",defaultMessage:"Global"}))),彁("footer",{className:"labcoat-columnfooter"},彁.apply(null,["nav",null].concat(slice.call(function(){var ref1,results;ref1=null!=props.footerLinks?props.footerLinks:{},results=[];for(key in ref1)value=ref1[key],results.push(彁("a",{href:value,target:"_self"},key));return results}())))))},Columns.Go.propTypes={footerLinks:React.PropTypes.object,myID:React.PropTypes.number.isRequired},Columns.NotFound=function(){return 彁(Columns.Column,{id:"labcoat-notfound"},彁(Columns.Heading,{icon:"icon.notfound"},彁(ReactIntl.FormattedMessage,{id:"notfound.notfound",defaultMessage:"Not found"})),彁(ReactIntl.FormattedMessage,{id:"notfound.notfound",defaultMessage:"Not found"}))},Columns.Timeline=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{name:React.PropTypes.string.isRequired},getInitialState:function(){return{timeline:null}},handleResponse:function(event){var params,timeline;if(params=this.getParams(),timeline=event.detail,timeline.type===params.type&&timeline.query===params.query)return this.setState({timeline:timeline})},getParams:function(name){switch(null==name&&(name=this.props.name),!1){case"home"!==name:return{type:Laboratory.Timeline.Type.HOME,query:""};case"community"!==name:return{type:Laboratory.Timeline.Type.LOCAL,query:""};case"global"!==name:return{type:Laboratory.Timeline.Type.GLOBAL,query:""};case"hashtag/"!==name.substr(0,8):return{type:Laboratory.Timeline.Type.HASHTAG,query:name.substr(8)};case"user/"!==name.substr(0,5):return{type:Laboratory.Timeline.Type.USER,query:name.substr(5)};case"notifications"!==name:return{type:Laboratory.Timeline.Type.NOTIFICATIONS,query:""};case"highlights"!==name:return{type:Laboratory.Timeline.Type.FAVOURITES,query:""};default:return{type:Laboratory.Timeline.Type.UNDEFINED,query:""}}},getIcon:function(){switch(this.getParams().type){case Laboratory.Timeline.Type.HOME:return"icon.home";case Laboratory.Timeline.Type.LOCAL:return"icon.community";case Laboratory.Timeline.Type.GLOBAL:return"icon.global";case"hashtag/"===Laboratory.Timeline.Type.HASHTAG:return"icon.hashtag";case"user/"===Laboratory.Timeline.Type.USER:return"icon.user";case Laboratory.Timeline.Type.NOTIFICATIONS:return"icon.notifications";case Laboratory.Timeline.Type.FAVOURITES:return"icon.favourite";default:return"icon.mystery"}},componentWillReceiveProps:function(nextProps){if(this.props.name!==nextProps.name)return Laboratory.dispatch("LaboratoryTimelineRequested",this.getParams(nextProps.name))},componentWillMount:function(){return Laboratory.listen("LaboratoryTimelineReceived",this.handleResponse),Laboratory.dispatch("LaboratoryTimelineRequested",this.getParams())},componentWillUnmount:function(){return Laboratory.forget("LaboratoryTimelineReceived",this.handleResponse)},render:function(){var post;return 彁(Columns.Column,"notifications"===this.props.name?{id:"labcoat-notifications"}:null,彁(Columns.Heading,{icon:this.getIcon()},彁(ReactIntl.FormattedMessage,{id:"timeline."+this.props.name,defaultMessage:this.props.name.charAt(0).toLocaleUpperCase()+this.props.name.slice(1)})),null!=this.state.timeline?彁.apply(null,["div",{className:"labcoat-posts"}].concat(slice.call(function(){var j,len,ref1,results;for(ref1=this.state.timeline.posts,results=[],j=0,len=ref1.length;j<len;j++)post=ref1[j],results.push(彁(Columns.Status,post));return results}.call(this)))):null)}}),Modules={},Modules.Module=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{attributes:React.PropTypes.object,close:React.PropTypes.bool,closeTo:React.PropTypes.string},getInitialState:function(){return{shouldClose:this.props.close}},contextTypes:{router:React.PropTypes.object.isRequired},componentWillReceiveProps:function(nextProps){if(nextProps.close&&!this.state.shouldClose)return this.close()},close:function(){return this.setState({shouldClose:!0}),window.setTimeout(function(_this){return function(){var ref1;return _this.props.closeTo||(null!=(ref1=window.history)?ref1.length:void 0)<=1?_this.context.router.push(_this.props.closeTo||"/"):_this.context.router.goBack()}}(this),500)},render:function(){return 彁("div",this.state.shouldClose?{id:"labcoat-module","data-labcoat-dismiss":""}:{id:"labcoat-module"},彁("div",{id:"labcoat-curtain",onClick:this.close}),彁("main",null!=this.props.attributes?this.props.attributes:null,this.props.children))}}),Modules.Account=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{id:React.PropTypes.number.isRequired,myID:React.PropTypes.number.isRequired},getInitialState:function(){return{account:null}},handleResponse:function(event){var account;if(account=event.detail,account.id===this.props.id)return this.setState({account:account})},componentWillReceiveProps:function(nextProps){if(this.props.id!==nextProps.id)return Laboratory.dispatch("LaboratoryProfileRequested",{id:nextProps.id})},componentWillMount:function(){return Laboratory.listen("LaboratoryProfileReceived",this.handleResponse),Laboratory.dispatch("LaboratoryProfileRequested",{id:this.props.id})},componentWillUnmount:function(){return Laboratory.forget("LaboratoryProfileReceived",this.handleResponse)},render:function(){return null==this.state.account?null:彁(Modules.Module,{attributes:{id:"labcoat-account"}},彁("header",{style:{backgroundImage:"url("+this.state.account.header+")"}},彁("a",{src:this.state.account.header,target:"_blank"})),彁(Shared.IDCard,{account:this.state.account,externalLinks:!0}),function(){switch(!1){case!(this.state.account.relationship&Laboratory.Profile.Relationship.SELF):return null;case!(this.state.account.relationship&Laboratory.Profile.Relationship.FOLLOWING):return 彁(Shared.Button,{label:彁(ReactIntl.FormattedMessage,{id:"account.unfollow",defaultMessage:"Unfollow"}),icon:"icon.unfollow"});case!(this.state.account.relationship&Laboratory.Profile.Relationship.BLOCKING):return 彁(Shared.Button,{label:彁(ReactIntl.FormattedMessage,{id:"account.blocked",defaultMessage:"Blocked"}),icon:"icon.blocked",disabled:!0});case!(this.state.account.relationship&Laboratory.Profile.Relationship.REQUESTED):return 彁(Shared.Button,{label:彁(ReactIntl.FormattedMessage,{id:"account.requested",defaultMessage:"Request Sent"}),icon:"icon.requested",disabled:!0});default:return this.state.account.locked?彁(Shared.Button,{label:彁(ReactIntl.FormattedMessage,{id:"account.request",defaultMessage:"Request Follow"}),icon:"icon.request"}):彁(Shared.Button,{label:彁(ReactIntl.FormattedMessage,{id:"account.follow",defaultMessage:"Follow"}),icon:"icon.follow"})}}.call(this),彁("p",{dangerouslySetInnerHTML:{__html:this.state.account.bio}}),彁("footer",null,彁("table",null,彁("tbody",null,彁("tr",null,彁("td",null,彁("b",null,this.state.account.statusCount),彁(ReactIntl.FormattedMessage,{id:"account.statuses",defaultMessage:"Posts"})),彁("td",null,彁("b",null,this.state.account.followingCount),彁(ReactIntl.FormattedMessage,{id:"account.following",defaultMessage:"Follows"})),彁("td",null,彁("b",null,this.state.account.followerCount),彁(ReactIntl.FormattedMessage,{id:"account.followers",defaultMessage:"Followers"})))))))}}),Modules.Composer=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{maxChars:React.PropTypes.number.isRequired,myID:React.PropTypes.number.isRequired,defaultPrivacy:React.PropTypes.string,visible:React.PropTypes.bool,text:React.PropTypes.string,inReplyTo:React.PropTypes.number},getDefaultProps:function(){return{text:"",inReplyTo:void 0}},getInitialState:function(){return{account:null,replyStatus:null,text:this.props.text+"\n",inReplyTo:isFinite(this.props.inReplyTo)?Number(this.props.inReplyTo):void 0,message:"",charsLeft:this.props.maxChars,makePublic:"private"!==this.props.defaultPrivacy,makeListed:"public"===this.props.defaultPrivacy,makeNSFW:!1,forceNSFW:!0,useMessage:!1,shouldClose:!1}},contextTypes:{intl:React.PropTypes.object.isRequired},handleResponse:function(event){var response;switch(response=event.detail,!1){case!(response instanceof Laboratory.Profile):this.setState({account:response});break;case!(response instanceof Laboratory.Post&&response.id===this.props.inReplyTo):this.setState({replyStatus:response})}},componentWillMount:function(){if(Laboratory.listen("LaboratoryProfileReceived",this.handleResponse),Laboratory.dispatch("LaboratoryProfileRequested",{id:this.props.myID}),isFinite(this.props.inReplyTo))return Laboratory.listen("LaboratoryPostReceived",this.handleResponse),Laboratory.dispatch("LaboratoryPostRequested",{id:this.props.inReplyTo})},componentWillUnmount:function(){return Laboratory.forget("LaboratoryProfileReceived",this.handleResponse),Laboratory.forget("LaboratoryPostReceived",this.handleResponse)},input:{textbox:null,message:null,makePublic:null,makeListed:null,makeNSFW:null,useMessage:null,post:null},componentWillReceiveProps:function(nextProps){if(!this.props.visible&&nextProps.visible&&this.setState({shouldClose:!1}),isFinite(nextProps.inReplyTo)&&nextProps.inReplyTo!==this.props.inReplyTo&&(Laboratory.listen("LaboratoryPostReceived",this.handleResponse),Laboratory.dispatch("LaboratoryPostRequested",{id:nextProps.inReplyTo})),nextProps.text!==this.props.text&&this.setState({text:nextProps.text+"\n"}),isFinite(nextProps.inReplyTo)&&nextProps.inReplyTo!==this.props.inReplyTo)return this.setState({inReplyTo:Number(nextProps.inReplyTo)})},getCharsLeft:function(){return this.charsLeft=this.props.maxChars-(this.input.textbox.value+this.input.message.value).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length+1},format:function(text){var i,j,lines,ref1,result;for(result=document.createElement("div"),lines=text.split("\n"),i=j=0,ref1=lines.length-1;0<=ref1?j<=ref1:j>=ref1;i=0<=ref1?++j:--j)lines[i]&&result.appendChild(document.createTextNode(lines[i])),(i!==lines.length-1||lines[i])&&result.appendChild(document.createElement("br"));return result.innerHTML},handleEvent:function(event){switch(event.type){case"change":switch(event.target){case this.input.message:return this.setState({message:this.input.message.value,charsLeft:this.getCharsLeft()});case this.input.makePublic:return this.setState({makePublic:this.input.makePublic.checked,makeListed:this.input.makeListed.checked&&this.input.makePublic.checked,forceListed:!this.input.makePublic.checked});case this.input.makeListed:return this.setState({makePublic:this.input.makePublic.checked||this.input.makeListed.checked,makeListed:this.input.makeListed.checked});case this.input.makeNSFW:return this.setState({makeNSFW:event.target.checked});case this.input.useMessage:return this.setState({useMessage:event.target.checked})}break;case"click":if(event.target===this.input.post&&this.getCharsLeft()>=0)return Laboratory.dispatch("LaboratoryPostComposed",{text:this.state.text,message:this.state.useMessage?this.state.message:null,makePublic:this.state.makePublic,makeListed:this.state.makeListed,makeNSFW:this.state.makeNSFW,inReplyTo:this.state.inReplyTo}),this.setState({replyStatus:null,text:"\n",message:"",inReplyTo:void 0,charsLeft:this.props.maxChars,useMessage:!1,makeNSFW:!1,forceNSFW:!0,shouldClose:!0})}},render:function(){var ref1;return!this.props.visible||this.state.inReplyTo&&(null!=(ref1=this.state.replyStatus)?ref1.id:void 0)!==this.state.inReplyTo?null:彁(Modules.Module,{attributes:{id:"labcoat-composer"},close:this.state.shouldClose},彁("header",null,this.state.account?彁(Shared.IDCard,{account:this.state.account}):null),彁(Shared.Textbox,{id:"labcoat-composertextbox","aria-label":this.context.intl.messages["composer.placeholder"],onChange:function(_this){return function(text){return _this.setState({text:text,charsLeft:_this.getCharsLeft()})}}(this),value:this.format(this.state.text),ref:function(_this){return function(ref){return _this.input.textbox=ref}}(this)}),彁("footer",null,彁("span",{id:"labcoat-count"},isNaN(this.state.charsLeft)?"":this.state.charsLeft),彁(Shared.Button,{onClick:this.handleEvent,getRef:function(_this){return function(ref){return _this.input.post=ref}}(this),disabled:this.state.charsLeft<0,label:彁(ReactIntl.FormattedMessage,{id:"composer.post",defaultMessage:"Post"}),icon:"icon.post"})),彁("aside",{id:"labcoat-composeroptions"},彁("div",{id:"labcoat-postoptions"},彁(Shared.Toggle,{getRef:function(_this){return function(ref){return _this.input.makePublic=ref}}(this),checked:this.state.makePublic,onChange:this.handleEvent,inactiveText:彁(ReactIntl.FormattedMessage,{id:"composer.private",defaultMessage:"Private"}),inactiveIcon:"icon.private",activeIcon:"icon.public",activeText:彁(ReactIntl.FormattedMessage,{id:"composer.public",defaultMessage:"Public"})}),彁(Shared.Toggle,{getRef:function(_this){return function(ref){return _this.input.makeListed=ref}}(this),checked:this.state.makeListed,onChange:this.handleEvent,inactiveText:彁(ReactIntl.FormattedMessage,{id:"composer.unlisted",defaultMessage:"Unlisted"}),inactiveIcon:"icon.unlisted",activeIcon:"icon.listed",activeText:彁(ReactIntl.FormattedMessage,{id:"composer.listed",defaultMessage:"Listed"})}),彁(Shared.Toggle,{getRef:function(_this){return function(ref){return _this.input.makeNSFW=ref}}(this),checked:this.state.makeNSFW,onChange:this.handleEvent,disabled:this.state.forceNSFW,inactiveText:彁(ReactIntl.FormattedMessage,{id:"composer.sfw",defaultMessage:"Safe"}),inactiveIcon:"icon.sfw",activeIcon:"icon.nsfw",activeText:彁(ReactIntl.FormattedMessage,{id:"composer.nsfw",defaultMessage:"Sensitive"})})),彁("div",{id:"labcoat-hideoptions"},彁(Shared.Toggle,{getRef:function(_this){return function(ref){return _this.input.useMessage=ref}}(this),checked:this.state.useMessage,onChange:this.handleEvent,inactiveText:"",inactiveIcon:"icon.nomessage",activeIcon:"icon.message",activeText:彁(ReactIntl.FormattedMessage,{id:"composer.message",defaultMessage:"Hide behind message"})}),彁("input",{type:"text",placeholder:this.context.intl.messages["composer.nomessage"],value:this.state.message,ref:function(_this){return function(ref){return _this.input.message=ref}}(this),onChange:this.handleEvent}))))}}),Shared={},Shared.Action=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{active:React.PropTypes.bool,icon:React.PropTypes.string.isRequired,label:React.PropTypes.oneOfType([React.PropTypes.element,React.PropTypes.string]),getRef:React.PropTypes.func,className:React.PropTypes.string,action:React.PropTypes.func},getDefaultProps:function(){return{active:!1,label:"",action:function(){}}},action:null,componentDidMount:function(){if(this.props.getRef)return this.props.getRef(this.action)},render:function(){var key,output_props,ref1,val;output_props={className:"labcoat-action",ref:function(_this){return function(ref){return _this.action=ref}}(this)},ref1=this.props;for(key in ref1)hasProp.call(ref1,key)&&(val=ref1[key],["className","getRef","ref","label","icon","containerClass"].indexOf(key)===-1&&(output_props[key]=val));return 彁("label",{className:"labcoat-actioncontainer"+(this.props.className?" "+this.props.className:"")+(this.props.disabled?" labcoat-actioncontainer--disabled":"")+(this.props.active?" labcoat-actioncontainer--active":""),onClick:this.props.action},this.props.label,彁("button",output_props,彁(Shared.Icon,{name:this.props.icon})))}}),Shared.Button=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{icon:React.PropTypes.string.isRequired,label:React.PropTypes.oneOfType([React.PropTypes.element,React.PropTypes.string]),getRef:React.PropTypes.func,containerClass:React.PropTypes.string},getDefaultProps:function(){return{label:""}},button:null,componentDidMount:function(){if(this.props.getRef)return this.props.getRef(this.button)},render:function(){var key,output_props,ref1,val;output_props={className:"labcoat-button",ref:function(_this){return function(ref){return _this.button=ref}}(this)},ref1=this.props;for(key in ref1)hasProp.call(ref1,key)&&(val=ref1[key],"className"===key?output_props[key]+=" "+val:["getRef","ref","label","icon","containerClass"].indexOf(key)===-1&&(output_props[key]=val));return 彁("label",{className:"labcoat-buttoncontainer"+(this.props.containerClass?" "+this.props.containerClass:"")+(this.props.disabled?" labcoat-buttoncontainer--disabled":"")},this.props.label,彁("button",output_props,彁(Shared.Icon,{name:this.props.icon})))}}),Shared.Icon=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{name:React.PropTypes.string.isRequired},contextTypes:{intl:React.PropTypes.object.isRequired},render:function(){return 彁("i",{className:"fa fa-fw fa-"+(this.context.intl.messages[this.props.name]||this.props.name),"aria-hidden":!0})}}),Shared.IDCard=function(props){return props.account instanceof Object?彁("div",{className:"labcoat-idcard"},彁.apply(null,slice.call(props.externalLinks?["a",{href:props.account.avatar,target:"_blank"}]:[ReactRouter.Link,{to:"user/"+props.account.id,title:props.account.displayName}]).concat([彁("img",{className:"labcoat-avatar",src:props.account.avatar,alt:props.account.displayName})])),彁.apply(null,slice.call(props.externalLinks?["a",{href:props.account.href,title:props.account.displayName,target:"_blank"}]:[ReactRouter.Link,{to:"user/"+props.account.id,title:props.account.displayName}]).concat([彁("b",{className:"labcoat-displayname"},props.account.displayName)],[彁("code",{className:"labcoat-username"},props.account.localAccount)]))):null},Shared.IDCard.propTypes={account:React.PropTypes.object.isRequired,externalLinks:React.PropTypes.bool},Shared.Textbox=React.createClass({propTypes:{getRef:React.PropTypes.func,onChange:React.PropTypes.func,className:React.PropTypes.string,id:React.PropTypes.string,"aria-label":React.PropTypes.string,value:React.PropTypes.string},getDefaultProps:function(){return{value:"<br>"}},componentDidMount:function(){return null!=this.props.getRef&&this.props.getRef(this.input),this.value=this.getContents()},caret:0,value:"\n",handleEvent:function(event){var br,rng,sel;if(("input"===event.type||"blur"===event.type||"keypress"===event.type)&&event.target===this.input){if("keypress"===event.type){if("Enter"!==event.key&&"Enter"!==event.code&&13!==event.keyCode)return;event.preventDefault(),sel=window.getSelection(),rng=sel.getRangeAt(0),rng.deleteContents(),rng.insertNode(br=document.createElement("br")),rng.setEndAfter(br),rng.collapse(!1),sel.removeAllRanges(),sel.addRange(rng)}return this.value=this.getContents(),this.props.onChange?this.props.onChange(this.value):void 0}},getContents:function(){var nde,out,wkr;for(wkr=document.createTreeWalker(this.input),nde=null,out="";null!=wkr.nextNode();)nde=wkr.currentNode,nde.nodeType===Node.TEXT_NODE?out+=nde.textContent:nde.nodeType===Node.ELEMENT_NODE&&"BR"===nde.tagName.toUpperCase()()&&(out+="\n");return out.length&&"\n"!==out.slice(-1)&&(out+="\n"),out},shouldComponentUpdate:function(nextProps,nextState){return this.props.value!==this.input.innerHTML},updateCaretPos:function(){var brs,pre,rng,sel;this.caret=0,sel=window.getSelection(),rng=sel.getRangeAt(0),pre=rng.cloneRange(),pre.selectNodeContents(this.input),pre.setEnd(rng.endContainer,rng.endOffset),brs=pre.cloneContents().querySelectorAll("br").length,this.caret=pre.toString().length+brs,pre.detach()},componentWillUpdate:function(){return this.updateCaretPos()},componentDidUpdate:function(){var idx,nde,ref1,ref2,rng,sel,success,wkr;for(sel=window.getSelection(),rng=document.createRange(),wkr=document.createTreeWalker(this.input),idx=0,nde=null,success=!1,this.caret>=this.value.length-1&&(success=!0);;){if(null==wkr.nextNode())break;if(nde=wkr.currentNode,nde.nodeType===Node.TEXT_NODE){if(idx<=(ref1=this.caret)&&ref1<=idx+nde.textContent.length){success=!0;break}idx+=nde.textContent.length}else{if(nde.nodeType!==Node.ELEMENT_NODE||"BR"!==nde.tagName.toUpperCase())continue;if(idx++===this.caret){success=!0;break}}}return success&&nde?nde.nodeType===Node.TEXT_NODE?rng.setEnd(nde,this.caret-idx):rng.selectNodeContents(nde):"BR"===(null!=(ref2=this.input.lastChild)?ref2.nodeName.toUpperCase:void 0)?rng.setEnd(this.input,this.input.childNodes.length-1):rng.selectNodeContents(this.input),rng.collapse(!1),sel.removeAllRanges(),sel.addRange(rng)},render:function(){var key,output_props,ref1,value;output_props={className:"labcoat-textbox"+("<br>"===this.props.value.toLowerCase()||"\n"===this.props.value||""===this.props.value?" labcoat-textbox--empty":"")+(null!=this.props.className?" "+this.props.className:""),contentEditable:!0,onKeyPress:this.handleEvent,onInput:this.handleEvent,onBlur:this.handleEvent,ref:function(_this){return function(ref){return _this.input=ref}}(this),dangerouslySetInnerHTML:{__html:this.props.value}},ref1=this.props;for(key in ref1)hasProp.call(ref1,key)&&(value=ref1[key],["className","contentEditable","value","getRef","onChange","onInput","onBlur","dangerouslySetInnerHTML","ref"].indexOf(key)===-1&&(output_props[key]=value));return 彁("div",output_props)}}),Shared.Toggle=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{checked:React.PropTypes.bool,disabled:React.PropTypes.bool,onChange:React.PropTypes.func,className:React.PropTypes.string,name:React.PropTypes.string,value:React.PropTypes.string,id:React.PropTypes.string,"aria-labelledby":React.PropTypes.string,"aria-label":React.PropTypes.string,getRef:React.PropTypes.func,activeText:React.PropTypes.oneOfType([React.PropTypes.element,React.PropTypes.string]),inactiveText:React.PropTypes.oneOfType([React.PropTypes.element,React.PropTypes.string]),activeicon:React.PropTypes.string,inactiveicon:React.PropTypes.string},getDefaultProps:function(){return{activeText:彁(ReactIntl.FormattedMessage,{id:"toggle.on",defaultMessage:"On"}),inactiveText:彁(ReactIntl.FormattedMessage,{id:"toggle.off",defaultMessage:"Off"}),activeIcon:"icon.on",inactiveIcon:"icon.off"}},getInitialState:function(){return{checked:!!this.props.checked,disabled:!!this.props.disabled,hasFocus:!1}},componentWillReceiveProps:function(nextProps){null!=nextProps.checked&&this.setState({checked:!!nextProps.checked}),null!=nextProps.disabled&&this.setState({disabled:!!nextProps.disabled})},componentDidMount:function(){if(null!=this.props.getRef)return this.props.getRef(this.input)},handleEvent:function(event){switch(event.type){case"click":return event.target!==this.input&&(event.preventDefault(),this.input.focus(),this.input.click()),this.setState({checked:this.input.checked});case"onFocus":if(this.setState({hasFocus:!0}),this.props.onFocus)return this.props.onFocus(event);break;case"onBlur":if(this.setState({hasFocus:!1}),this.props.onBlur)return this.props.onBlur(event)}},render:function(){var key,output_props,ref1,value;output_props={className:"labcoat-toggle-screenreader-only",type:"checkbox",onFocus:this.handleEvent,onBlur:this.handleEvent,ref:function(_this){return function(ref){return _this.input=ref}}(this)},ref1=this.props
;for(key in ref1)hasProp.call(ref1,key)&&(value=ref1[key],["className","activeText","activeIcon","inactiveText","inactiveIcon","getRef","ref","type","onFocus","onBlur"].indexOf(key)===-1&&(output_props[key]=value));return 彁("label",{className:"labcoat-toggle"+(this.state.checked?" labcoat-toggle--checked":"")+(this.state.disabled?" labcoat-toggle--disabled":"")+(this.state.hasFocus?" labcoat-toggle--focus":"")+(this.props.className?" "+this.props.className:""),onClick:this.handleEvent},彁("span",{className:"labcoat-toggle-label labcoat-toggle-label-off"},this.props.inactiveText),彁("div",{className:"labcoat-toggle-track"},彁("div",{className:"labcoat-toggle-track-check"},彁(Shared.Icon,{name:this.props.activeIcon})),彁("div",{className:"labcoat-toggle-track-x"},彁(Shared.Icon,{name:this.props.inactiveIcon})),彁("div",{className:"labcoat-toggle-thumb"}),彁("input",output_props)),彁("span",{className:"labcoat-toggle-label labcoat-toggle-label-on"},this.props.activeText))}}),Shared.InstanceQuery=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{locale:React.PropTypes.string.isRequired,title:React.PropTypes.string,basename:React.PropTypes.string},getDefaultProps:function(){return{title:"Labcoat",basename:"/web"}},getInitialState:function(){return{value:""}},input:null,handleEvent:function(event){"change"===event.type&&event.target===this.input?this.setState({value:this.input.value}):"keypress"===event.type&&event.target===this.input&&("Enter"===event.key||"Enter"===event.code||13===event.keyCode)&&this.input.value.length&&this.input.validity.valid&&(window.open("about:blank","LaboratoryOAuth"),Laboratory.dispatch("LaboratoryAuthorizationRequested",{name:this.props.title,url:"https://"+this.input.value,redirect:this.props.basename,scope:Laboratory.Authorization.Scope.READWRITEFOLLOW}),this.setState({value:""}))},render:function(){return 彁(ReactIntl.IntlProvider,{locale:this.props.locale,messages:Locales[this.props.locale]},彁("div",{id:"labcoat-instancequery"},彁(ReactIntl.FormattedMessage,{id:"instancequery.queryinstance",defaultMessage:"What's your instance?"}),彁("div",{id:"labcoat-instancequeryinput"},彁("code",{className:"labcoat-username"},"username@"),彁("input",{type:"text",pattern:"[0-9A-Za-z-.]+(:[0-9]{1,4})?",placeholder:"example.com",value:this.state.value,ref:function(_this){return function(ref){return _this.input=ref}}(this),onChange:this.handleEvent,onKeyPress:this.handleEvent}))))}}),Router=ReactRouter.Router,Route=ReactRouter.Route,IndexRoute=ReactRouter.IndexRoute,Shared.Frontend=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{locale:React.PropTypes.string.isRequired,myID:React.PropTypes.number.isRequired,title:React.PropTypes.string,links:React.PropTypes.object,basename:React.PropTypes.string,maxChars:React.PropTypes.number,useBrowserHistory:React.PropTypes.bool,defaultPrivacy:React.PropTypes.string},getDefaultProps:function(){return{title:"Labcoat",basename:"/web",maxChars:500,defaultPrivacy:"unlisted",useBrowserHistory:!0}},getInitialState:function(){return{thirdColumn:彁(Columns.Empty),showComposer:!1,composerQuery:null}},setThirdColumn:function(component,props){return this.setState({thirdColumn:彁(component,props)})},getThirdColumn:function(){return this.state.thirdColumn},showComposer:function(nextState){return this.setState({showComposer:!0,composerQuery:nextState.location.query||null})},hideComposer:function(){return this.setState({showComposer:!1,composerQuery:null})},componentWillMount:function(){this.history=(this.props.useBrowserHistory?ReactRouter.useRouterHistory(History.createHistory):ReactRouter.useRouterHistory(History.createHashHistory))({basename:this.props.basename}),this.routes=彁(Route,{path:"/",component:function(_this){return function(props){return 彁(UI.UI,{title:_this.props.title,maxChars:_this.props.maxChars,defaultPrivacy:_this.props.defaultPrivacy,thirdColumn:_this.getThirdColumn(),myID:_this.props.myID,showComposer:_this.state.showComposer,composerQuery:_this.state.composerQuery},props.children)}}(this)},彁(IndexRoute,{onEnter:function(_this){return function(){return _this.setThirdColumn(Columns.Go,{footerLinks:_this.props.links,myID:_this.props.myID})}}(this)}),彁(Route,{path:"start",onEnter:function(_this){return function(){return _this.setThirdColumn(Modules.Start)}}(this)}),彁(Route,{path:"global",onEnter:function(_this){return function(){return _this.setThirdColumn(Columns.Timeline,{name:"global"})}}(this)}),彁(Route,{path:"community",onEnter:function(_this){return function(){return _this.setThirdColumn(Columns.Timeline,{name:"community"})}}(this)}),彁(Route,{path:"hashtag/:id",onEnter:function(_this){return function(nextState){return _this.setThirdColumn(Columns.Timeline,{name:"hashtag/"+nextState.params.id})}}(this)}),彁(Route,{path:"favourites",onEnter:function(_this){return function(){return _this.setThirdColumn(Columns.Timeline,{name:"favourites"})}}(this)}),彁(Route,{path:"compose(?**)",onEnter:function(_this){return function(nextState){return _this.showComposer(nextState)}}(this),onLeave:function(_this){return function(){return _this.hideComposer()}}(this)}),彁(Route,{path:"post/:id",component:Modules.Post}),彁(Route,{path:"user/:id",component:function(_this){return function(props){return 彁(Modules.Account,{id:Number(props.params.id),myID:_this.props.myID})}}(this)}),彁(Route,{path:"user/:id/posts",onEnter:function(_this){return function(nextState){return _this.setThirdColumn(Columns.Timeline,{name:"user/"+nextState.params.id})}}(this)}),彁(Route,{path:"*",onEnter:function(_this){return function(){return _this.setThirdColumn(Columns.NotFound)}}(this)}))},componentWillUnmount:function(){null!=this.subscription&&(this.subscription.close(),this.subscription=void 0)},render:function(){return 彁(ReactIntl.IntlProvider,{locale:this.props.locale,messages:Locales[this.props.locale]},彁(Router,{history:this.history},this.routes))}}),UI={},UI.Header=function(props){return 彁("header",{id:"labcoat-header"},彁(UI.Title,null,props.title),彁(ReactRouter.Link,{to:"/compose"},彁(Shared.Button,{icon:"icon.compose",label:彁(ReactIntl.FormattedMessage,{id:"composer.compose",defaultMessage:"Compose"})})))},UI.Header.propTypes={title:React.PropTypes.string},UI.Title=function(props){return 彁("h1",null,彁(ReactRouter.Link,{to:"/"},props.children))},UI.UI=React.createClass({mixins:[ReactPureRenderMixin],propTypes:{title:React.PropTypes.string,maxChars:React.PropTypes.number.isRequired,myID:React.PropTypes.number.isRequired,thirdColumn:React.PropTypes.element.isRequired,showComposer:React.PropTypes.bool,composerQuery:React.PropTypes.object},handleEvent:function(e){switch(e.type){case"dragenter":return document.getElementById("labcoat-ui").setAttribute("data-laboratory-dragging","");case"dragover":return e.preventDefault(),e.dataTransfer.dropEffect="copy";case"dragleave":if(null==e.relatedTarget)return document.getElementById("labcoat-ui").removeAttribute("data-laboratory-dragging");break;case"drop":return e.preventDefault(),document.getElementById("labcoat-ui").removeAttribute("data-laboratory-dragging")}},componentWillMount:function(){return document.addEventListener("dragenter",this),document.addEventListener("dragover",this),document.addEventListener("dragleave",this),document.addEventListener("drop",this)},componentWillUnmount:function(){return document.removeEventListener("dragenter",this),document.removeEventListener("dragover",this),document.removeEventListener("dragleave",this),document.removeEventListener("drop",this)},render:function(){var ref1,ref2;return 彁("div",{id:"labcoat-ui"},彁(UI.Header,{title:this.props.title}),彁(Columns.Timeline,{name:"home"}),彁(Columns.Timeline,{name:"notifications"}),this.props.thirdColumn,this.props.children,彁(Modules.Composer,{defaultPrivacy:this.props.defaultPrivacy,myID:this.props.myID,maxChars:this.props.maxChars,visible:this.props.showComposer,text:null!=(ref1=this.props.composerQuery)?ref1.text:void 0,inReplyTo:isFinite(null!=(ref2=this.props.composerQuery)?ref2.inReplyTo:void 0)?Number(this.props.composerQuery.inReplyTo):void 0}))}}),Locales={},Locales.en={"timeline.home":"Home","timeline.community":"Community","timeline.global":"Global","timeline.notifications":"Notifications","composer.compose":"Compose","composer.post":"Post","composer.private":"Private","composer.public":"Public","composer.unlisted":"Unlisted","composer.listed":"Listed","composer.sfw":"Safe","composer.nsfw":"Sensitive","composer.nomessage":"…… ……","composer.message":"Hide behind message","composer.placeholder":"What's going on?","account.follow":"Follow","account.unfollow":"Unfollow","account.blocking":"Blocking","account.request":"Request Follow","account.requested":"Request Sent","account.statuses":"Posts","account.following":"Follows","account.followers":"Followers","status.and":"and","status.etal":"et al.","status.reblog":"Boost","status.unreblog":"Unboost","status.noreblog":"Private","status.favourite":"Highlight","status.unfavourite":"Unhighlight","status.reply":"Reply","status.followedyou":"followed you!","status.rebloggedthisreplyto":"boosted this reply to","status.rebloggedthisreply":"boosted this reply","status.rebloggedthisstatus":"boosted this post","status.favouritedthisreplyto":"highlighted this reply to","status.favouritedthisreply":"highlighted this reply","status.favouritedthisstatus":"highlighted this post","status.inreplyto":"In reply to","status.inreplytoself":"In reply to themselves","go.heading":"let's GO!","go.profile":"Profile","go.community":"Community","go.global":"Global","notfound.notfound":"Not found","toggle.off":"Off","toggle.on":"On","icon.home":"home","icon.community":"users","icon.global":"link","icon.hashtag":"hashtag","icon.user":"at","icon.notifications":"star-half-o","icon.mystery":"question-circle","icon.notfound":"exclamation-triangle","icon.go":"arrow-right","icon.profile":"list-alt","icon.reblog":"plus-square","icon.unreblog":"minus-square","icon.noreblog":"square-o","icon.favourite":"pencil","icon.unfavourite":"eraser","icon.reply":"reply","icon.follow":"user-plus","icon.unfollow":"user-times","icon.blocked":"ban","icon.request":"user-secret","icon.requested":"share-square","icon.post":"paper-plane-o","icon.private":"microphone-slash","icon.public":"rss","icon.unlisted":"envelope-o","icon.listed":"newspaper-o","icon.sfw":"picture-o","icon.nsfw":"exclamation","icon.nomessage":"ellipsis-h","icon.message":"question-circle-o","icon.on":"check-circle-o","icon.off":"times","icon.compose":"pencil-square-o","character.space":" ","character.comma":", "},Object.defineProperty(window,"Labcoat",{value:Object.freeze({"ℹ":"https://github.com/marrus-sh/labcoat","Nº":2}),enumerable:!0}),ReactIntl.addLocaleData(slice.call(ReactIntlLocaleData.en).concat(slice.call(ReactIntlLocaleData.de),slice.call(ReactIntlLocaleData.es),slice.call(ReactIntlLocaleData.fr),slice.call(ReactIntlLocaleData.pt),slice.call(ReactIntlLocaleData.hu),slice.call(ReactIntlLocaleData.uk))),window.addEventListener("load",function(){var INITIAL_STATE,config,data,elt,j,len,locale,message,prop,ref1,ref2,ref3,run,value;for((elt=document.getElementById("labcoat-config"))&&"SCRIPT"===elt.tagName.toUpperCase()&&(config=JSON.parse(elt.text)),null==config&&(config={}),null==(void 0!==INITIAL_STATE&&null!==INITIAL_STATE?INITIAL_STATE.meta:void 0)&&(INITIAL_STATE={meta:{}}),ref1=["title","basename","useBrowserHistory","locale","root","defaultPrivacy","accessToken","origin"],j=0,len=ref1.length;j<len;j++)prop=ref1[j],null==config[prop]&&(config[prop]={title:INITIAL_STATE.meta.title||"Labcoat",basename:null!=INITIAL_STATE.meta.router_basename?INITIAL_STATE.meta.router_basename:"/web",useBrowserHistory:INITIAL_STATE.meta.use_history||null==INITIAL_STATE.meta.use_history,locale:INITIAL_STATE.meta.locale,root:INITIAL_STATE.meta.react_root,defaultPrivacy:(null!=(ref2=INITIAL_STATE.composer)?ref2.default_privacy:void 0)||"unlisted",accessToken:INITIAL_STATE.meta.accessToken,origin:INITIAL_STATE.meta.origin||"/"}[prop]);null!=config.display&&(indexOf.call(config.display,"simple")>=0?document.documentElement.setAttribute("data-labcoat-simple"):document.documentElement.removeAttribute("data-labcoat-simple"),indexOf.call(config.display,"no-transparency")>=0?document.documentElement.setAttribute("data-labcoat-no-transparency"):document.documentElement.removeAttribute("data-labcoat-no-transparency"),indexOf.call(config.display,"reduce-motion")>=0?document.documentElement.setAttribute("data-labcoat-reduce-motion"):document.documentElement.removeAttribute("data-labcoat-reduce-motion")),ref3=config.locales;for(locale in ref3){data=ref3[locale],Locales[locale]instanceof Object||(Locales[locale]={});for(message in data)value=data[message],Locales[locale][message]=value}return document.documentElement.setAttribute("lang",config.locale),run=function(){var callback;return document.title=config.title,config.root=function(){switch(!1){case!(config.root&&(elt=document.getElementById(String(config.root)))):return elt;case!(elt=document.getElementById("frontend")):return elt;case!(elt=document.getElementsByClassName("app-body").item(0)):return elt;default:return document.body}}(),config.accessToken?Laboratory.dispatch("LaboratoryAuthorizationGranted",{accessToken:config.accessToken,origin:config.origin,scope:Authorization.Scope.READWRITEFOLLOW}):ReactDOM.render(彁(Shared.InstanceQuery,{title:config.title,locale:config.locale,basename:config.basename}),config.root),callback=function(){return ReactDOM.unmountComponentAtNode(config.root),ReactDOM.render(彁(Shared.Frontend,{title:config.title,locale:config.locale,myID:Laboratory.auth.me,useBrowserHistory:config.useBrowserHistory,basename:config.basename,defaultPrivacy:config.defaultPrivacy}),config.root),Laboratory.forget("LaboratoryAuthorizationReceived",callback)},Laboratory.listen("LaboratoryAuthorizationReceived",callback),Laboratory.forget("LaboratoryInitializationReady",callback)},("undefined"!=typeof Laboratory&&null!==Laboratory?Laboratory.ready:void 0)?run():Laboratory.listen("LaboratoryInitializationReady",run)})}).call(this);